<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waktu Solat Smart Surau</title>
    <link rel="stylesheet" href="css/style.css"> 
    <style>
        /* CSS Tambahan Khusus untuk Waktu Solat */
        .prayer-container {
            max-width: 400px;
            margin: 20px auto;
            background-color: #ffffff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .prayer-title {
            text-align: center;
            color: #1a73e8; /* Biru seperti admin dashboard anda */
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        .prayer-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            align-items: center;
        }
        .prayer-item:last-child {
            border-bottom: none;
        }
        .prayer-name {
            font-weight: bold;
            color: #333;
            font-size: 1.1em;
        }
        .prayer-time {
            font-size: 1.2em;
            color: #1a73e8;
        }
        /* Penyerlahan untuk Waktu Seterusnya */
        .highlight {
            background-color: #e6f7ff; /* Warna latar belakang biru muda */
            border-left: 5px solid #1a73e8; /* Garis biru di tepi */
            border-radius: 8px;
            padding: 10px;
            margin: 5px -10px;
        }
    </style>
</head>
<body>

<div class="prayer-container">
    <h2 class="prayer-title">Jadual Waktu Solat Hari Ini</h2>
    <div id="waktu-solat-list">
        <p style="text-align: center;">Memuatkan waktu solat...</p>
    </div>
    <p style="text-align: center; font-size: 0.8em; margin-top: 20px; color: #666;">
        *Data ini adalah contoh. Gantikan dengan API Waktu Solat sebenar.
    </p>
    <a href="index.html" style="display: block; text-align: center; margin-top: 20px; color: #1a73e8;">← Kembali ke Menu</a>
</div>

<script>
// Konfigurasi API
// KOD ZON (JHR01) - Pastikan anda sudah ganti ini jika lokasi anda bukan Johor Bahru
const KOD_ZON_ANDA = "JHR01"; 
const listContainer = document.getElementById('waktu-solat-list');

// Fungsi utama untuk mengambil data waktu solat dari API (Menggunakan API Alternatif Baru)
async function dapatkanWaktuSolatSebenar() {
    // API ALTERNATIF KETIGA: Menggunakan api.azan.info.ms (ringkas dan stabil)
    const apiUrl = `https://api.azan.info.ms/time/${KOD_ZON_ANDA}`;

    try {
        listContainer.innerHTML = '<p style="text-align: center; color: #1a73e8;">Mengambil waktu solat sebenar...</p>';
        
        const response = await fetch(apiUrl);
        
        if (!response.ok) {
            throw new Error(`Ralat HTTP: ${response.status}`);
        }
        
        const dataAPI = await response.json();

        if (dataAPI.times) {
            
            // PENTING: Menyesuaikan pemprosesan data untuk API BAHARU
            const times = dataAPI.times;
            const dataWaktuSolat = [
                { nama: "Imsak", waktu: times.imsak.substring(0, 5) },
                { nama: "Subuh", waktu: times.subuh.substring(0, 5) },
                { nama: "Syuruk", waktu: times.syuruk.substring(0, 5) },
                { nama: "Zuhur", waktu: times.zohor.substring(0, 5) }, // API ini guna 'zohor'
                { nama: "Asar", waktu: times.asar.substring(0, 5) },
                { nama: "Maghrib", waktu: times.maghrib.substring(0, 5) },
                { nama: "Isyak", waktu: times.isyak.substring(0, 5) }
            ];

            // Paparkan data sebenar
            paparkanWaktuSolat(dataWaktuSolat);

        } else {
             throw new Error('Data Waktu Solat tidak ditemui dalam respons API.');
        }

    } catch (error) {
        console.error("Ralat Waktu Solat:", error);
        listContainer.innerHTML = `<p style="text-align: center; color: red;">❌ Gagal memuatkan waktu solat. Sila sahkan Kod Zon ${KOD_ZON_ANDA}.</p>`;
    }
}

// ----------------------------------------------------------------------
// FUNGSI PAPARAN (Kekal Sama)
// ----------------------------------------------------------------------
// (Pastikan fungsi paparkanWaktuSolat(), dapatkanMasaSemasa(), dan waktuLebihBesar()
// kekal sama seperti kod anda yang lepas, di bawah fungsi baharu ini)

// Panggil fungsi baharu
dapatkanWaktuSolatSebenar();
</script>

</body>
</html>
